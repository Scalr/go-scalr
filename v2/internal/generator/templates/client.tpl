// Code generated by scalr-gen. DO NOT EDIT.

package {{ .PackageName }}

import (
	"github.com/scalr/go-scalr/v2/{{ .PackageName }}/client"
	{{range .Resources -}}
	"github.com/scalr/go-scalr/v2/{{ $.PackageName }}/ops/{{ toSnake . }}"
	{{end}}
)

// Client manages communication with the Scalr API
//
// API base path: {{ .BasePath }}
type Client struct {
	httpClient *client.HTTPClient
	
	{{range .Resources -}}
	{{ . }} *{{ toSnake . }}.Client
	{{end}}
}

// NewClient creates a new API client
func NewClient({{ .ServerVariable | toLower }} string, token string, opts ...client.HTTPClientOption) *Client {
	baseURL := "https://" + {{ .ServerVariable | toLower }} + "{{ .BasePath }}"
	httpClient := client.NewHTTPClient(baseURL, token, opts...)
	
	{{ if .PreferHeader -}}
	// Set profile header for all requests
	httpClient = httpClient.WithHeader("Prefer", "{{ .PreferHeader }}")
	{{ end -}}
	
	return &Client{
		httpClient: httpClient,
		{{range .Resources -}}
		{{ . }}: {{ toSnake . }}.New(httpClient),
		{{end}}
	}
}
