# Scalr Go Client v2

**A fully autogenerated, type-safe Go client for the [Scalr](https://scalr.io) API.**

---

## Why v2?

The v2 client is a **complete rewrite** with significant improvements over v1:

- **100% API Coverage** — Autogenerated directly from the OpenAPI spec
- **Modern Go** — Uses Go 1.23+ features (generics, iterators, `log/slog`)
- **Tri-State Values** — Distinguish between unset, null, and set values in POST/PATCH requests
- **Automatic Pagination** — Iterator pattern with `range` loops
- **Smart Retries** — Exponential backoff with jitter for 429/5xx errors
- **Structured Logging** — Integration with `log/slog`
- **User-Agent Customization** — Version tracking and app identification

### v2 Roadmap

- After going through release candidate versions, testing and preliminary adoption - Scalr deployment workflow
  will include a step to generate and release a new version of the client so it is always up to date with
  the production API.
- Once v2 reaches stable release, this v1 client will enter maintenance mode and no longer receive updates.

---

## Installation

```bash
go get github.com/scalr/go-scalr/v2
```

**Requirements**: Go 1.24 or higher

---

## Quick Start

```go
package main

import (
	"context"
	"fmt"

	"github.com/scalr/go-scalr/v2/scalr"
	"github.com/scalr/go-scalr/v2/scalr/schemas"
	"github.com/scalr/go-scalr/v2/scalr/value"
)

func main() {
	// Create client
	client := scalr.NewClient(
		"https://example.scalr.io",
		"your-api-token",
	)

	ctx := context.Background()

	// Create a workspace in environment env-xxx
	ws, err := client.Workspace.CreateWorkspace(
		ctx,
		&schemas.WorkspaceRequest{
			Attributes: schemas.WorkspaceAttributesRequest{
				Name: value.Set("example-workspace"),
			},
			Relationships: schemas.WorkspaceRelationshipsRequest{
				Environment: value.Set(schemas.Environment{ID: "env-xxx"}),
			},
		},
	)
	if err != nil {
		panic(err)
	}
	fmt.Printf("Workspace %q created.\n", ws.ID)
}

```

---

## Key Features

TBA: explanation and usage examples for:

- client configuration (logging, user-agent, etc)
- pagination and iterators
- `value.Value`, request/response objects
