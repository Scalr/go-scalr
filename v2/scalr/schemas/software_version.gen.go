// Code generated by scalr-gen. DO NOT EDIT.

package schemas

import (
	"encoding/json"
	"time"

	"github.com/scalr/go-scalr/v2/scalr/value"
)

// SoftwareVersionStatus represents the type for SoftwareVersionStatus
// The Docker image status.
type SoftwareVersionStatus string

// SoftwareVersionStatus constants
const (
	SoftwareVersionStatusPending      SoftwareVersionStatus = "pending"
	SoftwareVersionStatusFailed       SoftwareVersionStatus = "failed"
	SoftwareVersionStatusActive       SoftwareVersionStatus = "active"
	SoftwareVersionStatusNotAvailable SoftwareVersionStatus = "not-available"
)

// SoftwareVersionSoftwareType represents the type for SoftwareVersionSoftwareType
// The type of the software.
type SoftwareVersionSoftwareType string

// SoftwareVersionSoftwareType constants
const (
	SoftwareVersionSoftwareTypeOpa        SoftwareVersionSoftwareType = "opa"
	SoftwareVersionSoftwareTypeTerraform  SoftwareVersionSoftwareType = "terraform"
	SoftwareVersionSoftwareTypeInfracost  SoftwareVersionSoftwareType = "infracost"
	SoftwareVersionSoftwareTypeOpentofu   SoftwareVersionSoftwareType = "opentofu"
	SoftwareVersionSoftwareTypeTerragrunt SoftwareVersionSoftwareType = "terragrunt"
	SoftwareVersionSoftwareTypeCheckov    SoftwareVersionSoftwareType = "checkov"
	SoftwareVersionSoftwareTypeRunner     SoftwareVersionSoftwareType = "runner"
)

// Response version - used when unmarshalling from API responses
// Represents a software version.
type SoftwareVersion struct {
	ID         string                    `json:"id"`
	Type       string                    `json:"type"`
	Attributes SoftwareVersionAttributes `json:"attributes"`
}

// GetID returns the resource ID (implements client.ResourceLike)
func (r SoftwareVersion) GetID() string {
	return r.ID
}

// GetResourceType returns the JSON:API resource type (implements client.ResourceLike)
func (r SoftwareVersion) GetResourceType() string {
	if r.Type != "" {
		return r.Type
	}
	return "software-versions"
}

// SoftwareVersionAttributes holds the attributes for SoftwareVersion (response)
type SoftwareVersionAttributes struct {
	// The resource creation timestamp.
	CreatedAt time.Time `json:"created-at"`
	// Default version to use when workspace or policy-group creation request doesn't specify a version.
	Default bool `json:"default"`
	// Indicates that this software-version is deprecated, and thus not available for new workspaces or policy-groups.
	Deprecated bool `json:"deprecated"`
	// This field contains the error description, when this software-version's status is `failed`.
	Error *string `json:"error"`
	// Container image SHA256 hash.
	Hash *string `json:"hash"`
	// Reference to a container image in OCI registry.
	Image *string `json:"image"`
	// Indicates that this software-version is the latest one for the given software-type.
	Latest bool `json:"latest"`
	// The type of the software.
	SoftwareType SoftwareVersionSoftwareType `json:"software-type"`
	// The Docker image status.
	Status SoftwareVersionStatus `json:"status"`
	// Semantic Version.
	Version string `json:"version"`
}

// Request version - used when marshalling for API requests
// Represents a software version. (for requests)
type SoftwareVersionRequest struct {
	ID         string                           `json:"id,omitempty"`
	Type       string                           `json:"type,omitempty"`
	Attributes SoftwareVersionAttributesRequest `json:"attributes,omitempty"`
}

// MarshalJSON automatically sets the Type field during marshalling
func (r SoftwareVersionRequest) MarshalJSON() ([]byte, error) {
	type Alias SoftwareVersionRequest
	if r.Type == "" {
		r.Type = "software-versions"
	}
	return json.Marshal((Alias)(r))
}

// GetID returns the resource ID (implements client.ResourceLike)
func (r SoftwareVersionRequest) GetID() string {
	return r.ID
}

// GetResourceType returns the JSON:API resource type (implements client.ResourceLike)
func (r SoftwareVersionRequest) GetResourceType() string {
	return "software-versions"
}

// SoftwareVersionAttributesRequest holds the attributes for SoftwareVersion (request)
type SoftwareVersionAttributesRequest struct {
	// Indicates that this software-version is deprecated, and thus not available for new workspaces or policy-groups.
	Deprecated *value.Value[bool] `json:"deprecated,omitempty"`
	// Reference to a container image in OCI registry.
	Image *value.Value[string] `json:"image,omitempty"`
	// The type of the software.
	SoftwareType *value.Value[SoftwareVersionSoftwareType] `json:"software-type,omitempty"`
	// Semantic Version.
	Version *value.Value[string] `json:"version,omitempty"`
}
